<div class="game-container">
  <!-- Loading Spinner with Earth Planet -->
  <div *ngIf="isLoading" class="loading-screen">
    <app-mars-planet 
      [isSpinning]="true" 
      [isLoadingData]="false"
      (planetClick)="onPlanetClick()">
    </app-mars-planet>
    <div class="loading-text">
      <h1>Earth Agriculture Simulator</h1>
      <p>Loading Earth exploration data...</p>
      <div class="spinner"></div>
    </div>
  </div>

  <!-- Navigation Menu -->
  <nav *ngIf="!isLoading" class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">ğŸŒ Earth Simulator</div>
      <div class="nav-links">
        <a routerLink="/planet" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
          ğŸŒ Earth Explorer
        </a>
        <a routerLink="/ndvi-demo" routerLinkActive="active">
          ğŸŒ± NDVI Vegetation Health
        </a>
      </div>
    </div>
  </nav>

  <!-- Main Game Screens -->
  <div *ngIf="!isLoading" class="game-screen">
    <!-- Earth Planet Selection Screen -->
    <div *ngIf="currentScreen === 'planet'" class="planet-screen">
      <div class="game-header">
        <h1>Earth Agriculture Simulator</h1>
        <p>Click on Earth to explore real agricultural areas with NASA climate data</p>
        <div *ngIf="isLoadingData" class="loading-indicator">
          <div class="spinner-small"></div>
          <span>Loading climate data...</span>
        </div>
      </div>
      <app-mars-planet 
        [isSpinning]="false" 
        [isLoadingData]="isLoadingData"
        (planetClick)="onPlanetClick()">
      </app-mars-planet>
    </div>

    <!-- Area Selection Screen -->
    <div *ngIf="currentScreen === 'area-selection'" class="area-selection-screen">
      <div class="area-selection-header">
        <h2>ğŸŒ Choose Your Earth Location</h2>
        <p>Select an area from our NASA climate database to explore</p>
        <div *ngIf="isLoadingData" class="loading-indicator">
          <div class="spinner-small"></div>
          <span>{{ loadingMessage || 'Loading areas...' }}</span>
        </div>
      </div>
      <app-area-selection 
        [availableAreas]="availableAreas" 
        (areaSelected)="onAreaSelected($event)"
        (backToEarth)="onBackToEarth()">
      </app-area-selection>
    </div>



    <!-- Farming Interface Screen -->
    <div *ngIf="currentScreen === 'farming'" class="farming-screen">
      <app-farming-interface 
        [selectedArea]="selectedArea" 
        [currentLocationData]="currentLocationData"
        (startQuiz)="onStartQuiz()"
        (backToPlanet)="onBackToPlanet()">
      </app-farming-interface>
    </div>

    <!-- Quiz Screen -->
    <div *ngIf="currentScreen === 'quiz'" class="quiz-screen">
      <app-quiz 
        [selectedArea]="selectedArea" 
        [locationData]="currentLocationData"
        (backToFarming)="onBackToFarming()">
      </app-quiz>
    </div>

    <!-- Router Content for new pages -->
    <div class="router-content">
      <router-outlet></router-outlet>
    </div>

  </div>

  <!-- Copyright Footer -->
  <footer class="copyright-footer">
    <div class="footer-content">
      <span class="copyright-text">Â© IN_NASA_DZ - Earth Agriculture Simulator</span>
      <span class="data-source">Powered by NASA Land Surface Temperature Data</span>
    </div>
  </footer>
</div>